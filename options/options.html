<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Enhanced Search Results for Confluence - Options</title>
    <link rel="stylesheet" href="options.css">
</head>

<body>
    <div class="header">
        <img id="page-title-image" src="../assets/logo.png" alt="" />
    </div>
    <div class="container">
        <h1>Extension Settings</h1>
        <div class="form-group">
            <h3 class="section-heading">Domain Options</h3>
            <div id="domainSettings"></div>

            <div class="domain-controls">
                <button id="addDomain" title="Add Domain">+</button>
            </div>

            <div class="save-container">
                <button id="save" disabled>ðŸ’¾ Save Domain Settings</button>
            </div>

            <div class="status-container">
                <div id="status" class="status"></div>
            </div>
        </div>

        <h3 class="section-heading">Appearance</h3>
        <div class="toggle-group">
            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="darkModeToggle" class="toggle-label">Dark Mode</label>
                    <p class="toggle-desc">Enable dark theme for low-light environments.</p>
                </div>
                <label class="switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="slider round"></span>
                </label>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="tooltipToggle" class="toggle-label">Show Tooltips in Tree View</label>
                    <p class="toggle-desc">Display title, type, contributor, and last modified date on hover.</p>
                </div>
                <label class="switch">
                    <input type="checkbox" id="tooltipToggle">
                    <span class="slider round"></span>
                </label>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="imageTooltipToggle" class="toggle-label">Show Tooltips in Table View</label>
                    <p class="toggle-desc">Show larger previews with names when hovering contributor or space icons.</p>
                </div>
                <label class="switch">
                    <input type="checkbox" id="imageTooltipToggle">
                    <span class="slider round"></span>
                </label>
            </div>

            <h3 class="section-heading">AI Options</h3>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="enableSummariesToggle" class="toggle-label">Enable AI Summary in Enhanced Results
                        Page</label>
                    <p class="toggle-desc">Show the Summarize button in the enhanced search results interface.</p>
                </div>
                <label class="switch">
                    <input type="checkbox" id="enableSummariesToggle">
                    <span class="slider round"></span>
                </label>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="enableFloatingSummarizeToggle" class="toggle-label">Enable AI Summary in Confluence
                        Pages</label>
                    <p class="toggle-desc">Show the Summarize button on Confluence content pages.</p>
                </div>
                <label class="switch">
                    <input type="checkbox" id="enableFloatingSummarizeToggle">
                    <span class="slider round"></span>
                </label>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="autoOpenSummaryToggle" class="toggle-label">Auto-Open Summary</label>
                    <p class="toggle-desc">Automatically open the summary once it's available.</p>
                </div>
                <label class="switch">
                    <input type="checkbox" id="autoOpenSummaryToggle">
                    <span class="slider round"></span>
                </label>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="aiModelSelect" class="toggle-label">AI Model</label>
                    <p class="toggle-desc">Select which OpenAI model to use for summaries and Q&A.</p>
                </div>
                <select id="aiModelSelect" class="filter-dropdown">
                    <option value="gpt-4o" selected>GPT-4o</option>
                    <option value="o4-mini">o4-mini</option>
                    <option value="gpt-4.1">GPT-4.1</option>
                    <option value="o3">o3</option>
                </select>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="openaiApiKey" class="toggle-label">OpenAI API Key</label>
                    <p class="toggle-desc">Used to request AI analysis of search results.</p>
                    <input type="password" id="openaiApiKey" class="openai-api-input"
                        placeholder="Paste your key here..." style="margin-top: 8px; width: 100%;">
                </div>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="customApiEndpoint" class="toggle-label">Custom OpenAI API Base URL</label>
                    <p class="toggle-desc">Optional override for the base URL of your OpenAI-compatible API (e.g.,
                        https://api.openai.com/v1). The extension will automatically append /chat/completions.</p>
                    <input type="text" id="customApiEndpoint" class="openai-api-input"
                        placeholder="https://your-api-endpoint..." style="margin-top: 8px; width: 100%;" />
                </div>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="clearSummaries" class="toggle-label">Clear Cached AI-Generated Content</label>
                    <p class="toggle-desc">Delete all locally stored AI-generated content.</p>
                </div>
                <button id="clearSummaries">Summaries &amp; Follow-up Conversations</button>
                <button id="clearConversations">Follow-up Conversations Only</button>
            </div>

            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="customUserPrompt" class="toggle-label">Custom User Prompt</label>
                    <p class="toggle-desc">Optional prompt text that will be used in addition to the default when
                        generating summaries.</p>
                </div>
            </div>
            <textarea id="customUserPrompt" placeholder="Optional custom prompt..."></textarea>
        </div>

        <h3 class="section-heading collapsible-heading" id="advancedSettingsToggle">
            Advanced Settings â–¸
        </h3>
        <div class="toggle-group collapsible-content" id="advancedSettingsContent" style="display: none;">
            <div class="toggle-row">
                <div class="toggle-label-col">
                    <label for="resultsPerRequest" class="toggle-label">Results per Batch</label>
                    <p class="toggle-desc">Control how many search results are loaded at a time.</p>
                </div>
                <select id="resultsPerRequest" class="filter-dropdown">
                    <option value="50">50</option>
                    <option value="75" selected>75</option>
                    <option value="100">100</option>
                    <option value="125">125</option>
                    <option value="150">150</option>
                    <option value="200">200</option>
                </select>
            </div>
        </div>
    </div>

    <audio id="poof-audio" src="../assets/sounds/swoosh.mp3" preload="auto"></audio>
    <script src="options.js"></script>

    <div id="dialog-overlay" class="dialog-overlay" style="display: none;">
        <div class="dialog-content">
            <span class="dialog-close" id="dialog-close">&times;</span>
            <p id="dialog-message"></p>
            <div class="dialog-actions">
                <button id="dialog-cancel">Cancel</button>
                <button id="dialog-confirm">Confirm</button>
            </div>
        </div>
    </div>
</body>

</html>